apiVersion: v1
kind: ConfigMap
metadata:
  name: arr-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  arr.json: |
    {
      "annotations": { "list": [] },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
          "id": 100,
          "title": "Sonarr",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "green", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 0, "y": 1 },
          "id": 1,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Series (Monitored)",
          "type": "stat",
          "targets": [{ "expr": "sonarr_series_monitored_total{namespace=\"sonarr\"}", "legendFormat": "Monitored" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "blue", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 3, "y": 1 },
          "id": 2,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Series (Total)",
          "type": "stat",
          "targets": [{ "expr": "sonarr_series_total{namespace=\"sonarr\"}", "legendFormat": "Total" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "green", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 6, "y": 1 },
          "id": 3,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Episodes (Monitored)",
          "type": "stat",
          "targets": [{ "expr": "sonarr_episode_monitored_total{namespace=\"sonarr\"}", "legendFormat": "Monitored" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "red", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 9, "y": 1 },
          "id": 4,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Episodes (Missing)",
          "type": "stat",
          "targets": [{ "expr": "sonarr_episode_missing_total{namespace=\"sonarr\"}", "legendFormat": "Missing" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "orange", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 12, "y": 1 },
          "id": 5,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Queue",
          "type": "stat",
          "targets": [{ "expr": "sonarr_queue_total{namespace=\"sonarr\"} OR on() vector(0)", "legendFormat": "Queue" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "purple", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 15, "y": 1 },
          "id": 6,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "History",
          "type": "stat",
          "targets": [{ "expr": "sonarr_history_total{namespace=\"sonarr\"}", "legendFormat": "History" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "green", "value": 0 }] }, "mappings": [{ "type": "value", "options": { "0": { "text": "Healthy", "color": "green" } } }] } },
          "gridPos": { "h": 4, "w": 3, "x": 18, "y": 1 },
          "id": 7,
          "options": { "colorMode": "background", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Health Issues",
          "type": "stat",
          "targets": [{ "expr": "sonarr_system_health_issues{namespace=\"sonarr\"}", "legendFormat": "Issues" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "fillOpacity": 20, "lineWidth": 2, "stacking": { "mode": "normal" }, "spanNulls": true } } },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 5 },
          "id": 8,
          "options": { "legend": { "displayMode": "table", "placement": "bottom", "calcs": ["lastNotNull"] }, "tooltip": { "mode": "multi" } },
          "title": "Sonarr Episodes by Quality",
          "type": "timeseries",
          "targets": [{ "expr": "sonarr_episode_quality_total{namespace=\"sonarr\"}", "legendFormat": "{{ quality }}" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "fillOpacity": 20, "lineWidth": 2, "spanNulls": true }, "unit": "bytes" } },
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 5 },
          "id": 9,
          "options": { "legend": { "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "multi" } },
          "title": "Sonarr Resources",
          "type": "timeseries",
          "targets": [
            { "expr": "container_memory_working_set_bytes{namespace=\"sonarr\", container=\"sonarr\"}", "legendFormat": "Sonarr Memory" },
            { "expr": "container_memory_working_set_bytes{namespace=\"sonarr\", container=\"exportarr\"}", "legendFormat": "Exportarr Memory" }
          ]
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 13 },
          "id": 200,
          "title": "Radarr",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "green", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 0, "y": 14 },
          "id": 11,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Movies (Monitored)",
          "type": "stat",
          "targets": [{ "expr": "radarr_movie_monitored_total{namespace=\"radarr\"}", "legendFormat": "Monitored" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "blue", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 3, "y": 14 },
          "id": 12,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Movies (Total)",
          "type": "stat",
          "targets": [{ "expr": "radarr_movie_total{namespace=\"radarr\"}", "legendFormat": "Total" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "red", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 6, "y": 14 },
          "id": 13,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Movies (Missing)",
          "type": "stat",
          "targets": [{ "expr": "radarr_movie_missing_total{namespace=\"radarr\"}", "legendFormat": "Missing" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "orange", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 9, "y": 14 },
          "id": 14,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Queue",
          "type": "stat",
          "targets": [{ "expr": "radarr_queue_total{namespace=\"radarr\"} OR on() vector(0)", "legendFormat": "Queue" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "purple", "value": null }] } } },
          "gridPos": { "h": 4, "w": 3, "x": 12, "y": 14 },
          "id": 15,
          "options": { "colorMode": "value", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "History",
          "type": "stat",
          "targets": [{ "expr": "radarr_history_total{namespace=\"radarr\"}", "legendFormat": "History" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "green", "value": 0 }] }, "mappings": [{ "type": "value", "options": { "0": { "text": "Healthy", "color": "green" } } }] } },
          "gridPos": { "h": 4, "w": 3, "x": 15, "y": 14 },
          "id": 16,
          "options": { "colorMode": "background", "graphMode": "none", "reduceOptions": { "calcs": ["lastNotNull"] } },
          "title": "Health Issues",
          "type": "stat",
          "targets": [{ "expr": "radarr_system_health_issues{namespace=\"radarr\"}", "legendFormat": "Issues" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "fillOpacity": 20, "lineWidth": 2, "stacking": { "mode": "normal" }, "spanNulls": true } } },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 18 },
          "id": 17,
          "options": { "legend": { "displayMode": "table", "placement": "bottom", "calcs": ["lastNotNull"] }, "tooltip": { "mode": "multi" } },
          "title": "Radarr Movies by Quality",
          "type": "timeseries",
          "targets": [{ "expr": "radarr_movie_quality_total{namespace=\"radarr\"}", "legendFormat": "{{ quality }}" }]
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "fillOpacity": 20, "lineWidth": 2, "spanNulls": true }, "unit": "bytes" } },
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 18 },
          "id": 18,
          "options": { "legend": { "displayMode": "list", "placement": "bottom" }, "tooltip": { "mode": "multi" } },
          "title": "Radarr Resources",
          "type": "timeseries",
          "targets": [
            { "expr": "container_memory_working_set_bytes{namespace=\"radarr\", container=\"radarr\"}", "legendFormat": "Radarr Memory" },
            { "expr": "container_memory_working_set_bytes{namespace=\"radarr\", container=\"exportarr\"}", "legendFormat": "Exportarr Memory" }
          ]
        }
      ],
      "schemaVersion": 39,
      "tags": ["sonarr", "radarr", "arr", "homelab"],
      "templating": { "list": [] },
      "time": { "from": "now-6h", "to": "now" },
      "timepicker": {},
      "timezone": "",
      "title": "Sonarr / Radarr",
      "uid": "arr-dashboard",
      "version": 1
    }
